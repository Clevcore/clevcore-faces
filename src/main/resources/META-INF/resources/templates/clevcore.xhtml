<!DOCTYPE html>
<h:html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:o="http://omnifaces.org/ui"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:cc="http://xmlns.jcp.org/jsf/composite/components">
	<h:head>
		<h:outputFormat value="#{clevcoreSetting.obsolete_browser}" escape="false">
			<f:param value="#{bbClevcore.path}" />
		</h:outputFormat>

		<c:choose>
			<c:when
				test="#{facesContext.application.projectStage == 'Production'}">
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/reset.min.css?v=#{clevcoreSetting.version}" />

				<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" />
				<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
				<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css" />

				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/components/css/components.min.css?v=#{clevcoreSetting.version}" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/animate.min.css?v=#{clevcoreSetting.version}" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/common.min.css?v=#{clevcoreSetting.version}" />

				<script src="#{bbClevcore.path}/javax.faces.resource/common/js/reset.min.js?v=#{clevcoreSetting.version}"></script>
				<script src="#{bbClevcore.path}/javax.faces.resource/common/js/common.min.js?v=#{clevcoreSetting.version}"></script>
				<script src="#{bbClevcore.path}/javax.faces.resource/components/js/components.min.js?v=#{clevcoreSetting.version}"></script>
			</c:when>
			<c:otherwise>
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/reset.min.css" />

				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/vendor/css/font-roboto.css" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/vendor/css/font-awesome.css" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/vendor/css/material-icons.css" />

				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/components/css/components.css" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/animate.css" />
				<link rel="stylesheet" href="#{bbClevcore.path}/javax.faces.resource/common/css/common.css" />

				<script src="#{bbClevcore.path}/javax.faces.resource/common/js/reset.js"></script>
				<script src="#{bbClevcore.path}/javax.faces.resource/common/js/common.js"></script>
				<script src="#{bbClevcore.path}/javax.faces.resource/components/js/components.js"></script>
			</c:otherwise>
		</c:choose>

		<ui:insert name="head" />
	</h:head>
	<h:body>
		<ui:insert name="body" />

		<cc:popup id="clevcore-sessionAboutTimeout" closeable="false">
			<h:form>
				<cc:panel styleClass="mwNormal">
					<cc:panelHead icon="#{clevcoreIcon.exclamation}">
						<h:outputText value="#{clevcoreMsg.session_about_timeout}" />
					</cc:panelHead>
					<cc:panelBody>
						<h:outputText value="#{clevcoreMsg.session_about_timeout_info}" />
					</cc:panelBody>
					<cc:panelFoot styleClass="m-tRight">
						<cc:commandButton styleClass="primary-simple m-wAuto"
							value="#{clevcoreMsg._continue}" render="@this"
							oncomplete="hidePopup();" />
					</cc:panelFoot>
				</cc:panel>
			</h:form>
		</cc:popup>

		<cc:popup id="clevcore-sessionTimeout" closeable="false">
			<h:form>
				<cc:panel styleClass="mwNormal">
					<cc:panelHead icon="#{clevcoreIcon.exclamation}">
						<h:outputText value="#{clevcoreMsg.session_timeout}" />
					</cc:panelHead>
					<cc:panelBody>
						<h:outputText value="#{clevcoreMsg.session_timeout_info}" />
					</cc:panelBody>
					<cc:panelFoot styleClass="m-tRight">
						<cc:commandButton styleClass="primary-simple m-wAuto"
							value="#{clevcoreMsg.restart}" onclick="redirect(path);" />
					</cc:panelFoot>
				</cc:panel>
			</h:form>
		</cc:popup>

		<cc:obsoleteBrowser />

		<cc:messages id="#{bbClevcore.idMessages}" />

		<h:panelGroup id="#{bbClevcore.idScript}">
			<script>#{bbClevcore.script}</script>
		</h:panelGroup>

		<script>
        	document.addEventListener("DOMContentLoaded", function() {
				resources.msg.confirm_navigation_info = "#{clevcoreMsg.confirm_navigation_info}";
				resources.msg.compress = "#{clevcoreMsg.compress}";
				resources.msg.expand = "#{clevcoreMsg.expand}";

				HandleSessionTimeout.maxInactiveInterval = #{request.session.maxInactiveInterval};
				HandleSessionTimeout.start();
			});

			var path = "#{bbClevcore.path}";
			var projectStage = "#{facesContext.application.projectStage}";
		</script>

		<o:onloadScript>
			var facesContext = {
				maximumSeverity : "#{facesContext.maximumSeverity}",
				validationFailed : #{facesContext.validationFailed}
			};
		</o:onloadScript>
	</h:body>
</h:html>