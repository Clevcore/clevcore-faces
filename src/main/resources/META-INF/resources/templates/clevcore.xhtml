<!DOCTYPE html>
<h:html xmlns="http://www.w3.org/1999/xhtml" xmlns:o="http://omnifaces.org/ui"
    xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:cc="http://xmlns.jcp.org/jsf/composite/components">
    <h:head>
        <h:outputStylesheet name="common/css/reset.css" />

        <link href="https://fonts.googleapis.com/css?family=Roboto:100,300,400,500,700" rel="stylesheet" />
        <h:outputStylesheet name="vendor/css/font-awesome.min.css" />
        <h:outputStylesheet name="vendor/css/material-icons.min.css" />

        <h:outputStylesheet name="components/css/components.css" />
        <h:outputStylesheet name="common/css/animate.css" />
        <h:outputStylesheet name="common/css/common.css" />

        <h:outputScript name="common/js/reset.js" />
        <h:outputScript name="common/js/common.js" />
        <h:outputScript name="components/js/components.js" />

        <o:conditionalComment if="lt IE 9">
            <h:outputScript name="vendor/js/html5shiv.min.js" />
            <h:outputScript name="vendor/js/respond.min.js" />
        </o:conditionalComment>

        <ui:insert name="head" />
    </h:head>
    <h:body>
		<ui:insert name="body" />

		<cc:popup id="clevcore-sessionAboutTimeout" closeable="false">
			<h:form>
				<cc:panel styleClass="mwNormal">
					<cc:panelHead icon="#{clevcoreIcon.exclamation}">
						<h:outputText value="#{clevcoreMsg.session_about_timeout}" />
					</cc:panelHead>
					<cc:panelBody>
						<h:outputText value="#{clevcoreMsg.session_about_timeout_info}" />
					</cc:panelBody>
					<cc:panelFoot styleClass="m-tRight">
						<cc:commandButton styleClass="primary-simple m-wAuto"
							value="#{clevcoreMsg._continue}" render="@this"
							oncomplete="hidePopup();" />
					</cc:panelFoot>
				</cc:panel>
			</h:form>
		</cc:popup>

		<cc:popup id="clevcore-sessionTimeout" closeable="false">
			<h:form>
				<cc:panel styleClass="mwNormal">
					<cc:panelHead icon="#{clevcoreIcon.exclamation}">
						<h:outputText value="#{clevcoreMsg.session_timeout}" />
					</cc:panelHead>
					<cc:panelBody>
						<h:outputText value="#{clevcoreMsg.session_timeout_info}" />
					</cc:panelBody>
					<cc:panelFoot styleClass="m-tRight">
						<cc:commandButton styleClass="primary-simple m-wAuto"
							value="#{clevcoreMsg.restart}"
							onclick="redirect(path);" />
					</cc:panelFoot>
				</cc:panel>
			</h:form>
		</cc:popup>

		<cc:popup id="clevcore-versionBrowserUnsupportedPopup">
			<h:form>
				<cc:panel styleClass="mwNormal">
					<cc:panelHead icon="#{clevcoreIcon.exclamation}">
						<h:outputText value="#{clevcoreMsg.version_browser_unsupported}" />
					</cc:panelHead>
					<cc:panelBody>
						<h:panelGroup layout="block" styleClass="pBottomNormal">
							<h:outputText value="#{clevcoreMsg.version_browser_unsupported_info}" />
						</h:panelGroup>

						<h:panelGroup layout="block">
							<h:selectBooleanCheckbox id="notRemember">
								<f:ajax execute="@this"
									listener="#{bbClevcore.notRememberVersionBrowserUnsupported}" />
							</h:selectBooleanCheckbox>
							<h:outputLabel for="notRemember" styleClass="mLeftNormal"
								value="#{clevcoreMsg.not_remember}" />
						</h:panelGroup>
					</cc:panelBody>
					<cc:panelFoot styleClass="row">
						<cc:commandButton styleClass="col s6 separator-vertical primary-simple"
							value="#{clevcoreMsg.accept}"
							onclick="redirect('https://whatbrowser.org/');" />
						<cc:commandButton styleClass="col s6 default-simple"
							value="#{clevcoreMsg.cancel}" onclick="hidePopup();" />
					</cc:panelFoot>
				</cc:panel>
			</h:form>
		</cc:popup>

		<cc:messages id="#{bbClevcore.idMessages}" />

        <h:panelGroup id="#{bbClevcore.idScript}">
            <script>#{bbClevcore.script}</script>
        </h:panelGroup>

        <script>
        	document.addEventListener("DOMContentLoaded", function() {
				resources.msg.confirm_navigation_info = "#{clevcoreMsg.confirm_navigation_info}";
				resources.msg.compress = "#{clevcoreMsg.compress}";
				resources.msg.expand = "#{clevcoreMsg.expand}";

				HandleSessionTimeout.maxInactiveInterval = #{request.session.maxInactiveInterval};
				HandleSessionTimeout.start();
			});

			var path = "#{bbClevcore.path}";
			var notRememberVersionBrowserUnsupported = #{bbClevcore.getNotRememberVersionBrowserUnsupported()};
			var projectStage = "#{facesContext.application.projectStage}";
		</script>

        <o:onloadScript>
			var facesContext = {
				maximumSeverity : "#{facesContext.maximumSeverity}",
				validationFailed : #{facesContext.validationFailed}
			};
		</o:onloadScript>
    </h:body>
</h:html>